<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flipbook Loader</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: radial-gradient(circle at top, #1e293b, #020617);
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    color: #e5e7eb;
}

/* FLIPBOOK BANNER */
.flipbook-banner {
    width: min(520px, 90%);
    border-radius: 18px;
    cursor: pointer;
    transition: transform 0.35s ease, box-shadow 0.35s ease;
    box-shadow: 0 18px 40px rgba(0,0,0,0.45);
}
.flipbook-banner.lifted {
    transform: translateY(-14px) rotateZ(2deg);
    box-shadow: 0 28px 60px rgba(0,0,0,0.65);
}

/* SCREEN */
.screen {
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 18px;
    text-align: center;
    max-width: 720px;
    padding: 32px;
}
.screen.active {
    display: flex;
}

/* RAINBOW */
.rainbow {
    background: linear-gradient(
        90deg,
        #ff0080,
        #ff8c00,
        #faff00,
        #00ff8c,
        #00c8ff,
        #8a2be2
    );
    background-size: 300% 300%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: rainbowMove 6s ease infinite;
}
@keyframes rainbowMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.rainbow-title {
    font-size: clamp(36px, 6vw, 56px);
    font-weight: 900;
    letter-spacing: 2px;
    transform: perspective(600px) rotateX(12deg);
}
.rainbow-sub {
    font-size: 18px;
    font-weight: 600;
    letter-spacing: 4px;
    margin-top: -10px;
    opacity: 0.9;
}

/* STORY */
.story {
    font-size: 17px;
    line-height: 1.7;
    color: #cbd5f5;
    background: rgba(255,255,255,0.04);
    backdrop-filter: blur(10px);
    border-radius: 18px;
    padding: 26px 28px;
    box-shadow:
        inset 0 0 0 1px rgba(255,255,255,0.08),
        0 25px 50px rgba(0,0,0,0.5);
}

/* COMING SOON */
.coming-soon {
    margin-top: 14px;
    font-size: 14px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: rgba(203,213,245,0.6);
}

/* MODE */
.mode-title {
    font-size: 28px;
    font-weight: 700;
    letter-spacing: 1.5px;
}
.mode-text {
    font-size: 16px;
    line-height: 1.6;
    color: #c7d2fe;
    max-width: 560px;
}

/* STUDENTS SCREEN */
.students-title {
    font-size: clamp(42px, 7vw, 64px);
    font-weight: 900;
}
.students-text {
    font-size: 18px;
    line-height: 1.7;
    max-width: 600px;
    color: #dbeafe;
    background: rgba(255,255,255,0.05);
    padding: 28px;
    border-radius: 20px;
    box-shadow: 0 25px 50px rgba(0,0,0,0.45);
}

/* BUTTON */
.btn {
    margin-top: 12px;
    padding: 16px 38px;
    font-size: 18px;
    border-radius: 999px;
    border: none;
    cursor: pointer;
    color: #fff;
    background: linear-gradient(145deg,
        rgba(255,255,255,0.22),
        rgba(255,255,255,0.06)
    );
    box-shadow:
        inset 0 0 0 1px rgba(255,255,255,0.15),
        0 12px 35px rgba(0,0,0,0.55);
    transition: transform .18s ease;
}
.btn:hover { transform: scale(1.06); }
.btn:active { transform: scale(0.95); }

.mode-buttons {
    display: flex;
    gap: 18px;
    flex-wrap: wrap;
    justify-content: center;
}

/* EMOJI INSIDE CIRCLE LOADER */
#screenLoader {
    position: relative;
}
/* CIRCLE + EMOJI WRAPPER */
.circle-wrap {
    position: relative;
    width: 120px;
    height: 120px;
}

/* EMOJI PERFECT CENTER */
#loaderEmoji {
    position: absolute;
    inset: 0;
    margin: auto;

    width: 68px;
    height: 68px;

    display: flex;
    align-items: center;
    justify-content: center;

    font-size: 34px;
    line-height: 1;

    transform: translateY(9px);
    border-radius: 50%;
    background: rgba(255,255,255,0.12);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);

    box-shadow:
        inset 0 0 0 1px rgba(255,255,255,0.18),
        0 8px 30px rgba(0,0,0,0.45);

    pointer-events: none;
    transform: translateY(9px);
}
/* FLOWER FALL (FIRST SCREEN ONLY) */
.flower-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;

    overflow: hidden;
    pointer-events: none;
    z-index: 0;
}


.flower {
    position: absolute;
    top: -40px;
    font-size: 20px;
    opacity: 0.85;
    animation: fall linear infinite;
}

@keyframes fall {
    to {
        transform: translateY(130vh) translateX(40px) rotate(360deg);
    }
}


/* ensure content stays above flowers */
#screenLoad > *:not(.flower-layer) {
    position: relative;
    z-index: 1;
}

.made-with {
    margin-top: 18px;
    font-size: 13px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: rgba(203,213,245,0.7);

    /* üëá THIS LINE PRESERVES EMOJI COLOR */
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif;
}
.made-with {
    animation: heartPulse 2.8s ease-in-out infinite;
}

@keyframes heartPulse {
    0%, 100% {
        opacity: 0.7;
        transform: scale(1);
        text-shadow: none;
    }
    50% {
        opacity: 1;
        transform: scale(1.06);
        text-shadow: 0 0 12px rgba(255,80,120,0.55);
    }
}
/* FLOATING QUOTES (SPECIAL SCREEN) */
.quote-layer {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
    z-index: 0;
}

.floating-quote {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);

    max-width: 85%;
    padding: 18px 28px;

    text-align: center;
    font-size: 17px;
    line-height: 1.6;

    color: rgba(255,255,255,0.95);

    /* üåô OVAL GLASS POPUP */
    background: rgba(255,255,255,0.12);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);

    border-radius: 999px; /* ‚Üê THIS MAKES IT OVAL */

    box-shadow:
        inset 0 0 0 1px rgba(255,255,255,0.18),
        0 20px 50px rgba(0,0,0,0.55);

    opacity: 0;
    animation: quoteFloat 6s ease forwards;
}


@keyframes quoteFloat {
    0% {
        opacity: 0;
        transform: translate(-50%, 30px);
    }
    20% {
        opacity: 1;
    }
    80% {
        opacity: 1;
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -40px);
    }
}

/* keep content above quotes */
#screenStudents > *:not(.quote-layer) {
    position: relative;
    z-index: 1;
}
/* DOUBLE TAP / CLICK HEART EFFECT */
.like-heart {
    position: fixed;
    font-size: 80px;
    pointer-events: none;
    z-index: 9999;

    animation: heartPop 1s ease-out forwards;
}

@keyframes heartPop {
    0% {
        transform: translate(-50%, -50%) scale(0.6);
        opacity: 0;
    }
    15% {
        transform: translate(-50%, -50%) scale(1.2) rotate(-5deg);
        opacity: 1;
    }
    30% {
        transform: translate(-50%, -55%) scale(1.1) rotate(5deg);
    }
    60% {
        transform: translate(-50%, -70%) scale(1) rotate(-3deg);
        opacity: 0.9;
    }
    100% {
        transform: translate(-50%, -90%) scale(0.9);
        opacity: 0;
    }
}


</style>
</head>

<body>


<!-- SCREEN 1 -->
<div id="screenLoad" class="screen active">
    <div class="flower-layer"></div>

    <div class="rainbow rainbow-title">BATCH 2025 ‚Äì 2026</div>
    <div class="rainbow rainbow-sub">(KVIANS)</div>

    <div class="story" id="storyText">
This journey was never just about heavy backpacks, messy notes, or those scary exams. It was really about the small, quiet moments that changed us without us even realizing it. ü•∫

Think about the times we laughed so hard in the classroom üòÇüòÖ, the day we felt nervous about a project , and the friends who started to feel like family ‚ù§üíñ. Every little win we celebrated and every mistake we made actually mattered. They were all steps helping us move forward together. Our class is special because we share memories full of brave moments and big, bright dreams.

Even though time is going to fly by and we will head off to different places, these memories will always stay warm in our hearts. The most important things we learned here weren't just in our textbooks; they were about kindness, growth, and believing in ourselves. Those lessons stay with us forever, no matter where we go. üíåüí•
    </div>
<div class="made-with">
    MADE WITH ‚ù§Ô∏è

</div>

    <div class="coming-soon">
        More features & memories are coming soon‚Ä¶ <br>
        ‚ÄúSTAY TUNED‚Äù <br>
        DOUBLE TAP ANYWHERE
    </div>

    <div class="mode-buttons">
        <button class="btn" onclick="startLoading()">üìñ Load Flipbook</button>
        <button class="btn" onclick="showStudents()">üéì Special</button>
    </div>

</div>


<!-- SCREEN LOADER -->
<div id="screenLoader" class="screen">

    <div class="rainbow rainbow-title">Loading Memories‚Ä¶</div>
    <div class="rainbow-sub">Please wait</div>
<!-- CIRCLE WRAPPER -->
<div class="circle-wrap">
    <!-- CIRCULAR LOADER -->
    <svg id="circleLoader" width="120" height="120" viewBox="0 0 120 120" style="margin-top:10px;">
        <circle cx="60" cy="60" r="54" stroke="rgba(255,255,255,0.15)" stroke-width="10" fill="none"/>
        <circle id="circleProgress"
            cx="60" cy="60" r="54"
            stroke="url(#grad)"
            stroke-width="10"
            fill="none"
            stroke-linecap="round"
            stroke-dasharray="339.29"
            stroke-dashoffset="339.29"
            transform="rotate(-90 60 60)"
        />
        <defs>
            <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#38bdf8"/>
                <stop offset="100%" stop-color="#22c55e"/>
            </linearGradient>
        </defs>
    </svg>


    <!-- EMOJI CENTER -->
    <div id="loaderEmoji">üìö</div>

</div>


    <div style="width:100%;max-width:420px;margin-top:24px;">
        <div style="height:14px;border-radius:999px;background:rgba(255,255,255,0.15);overflow:hidden;">
            <div id="loadBar" style="height:100%;width:0%;background:linear-gradient(90deg,#38bdf8,#22c55e);transition:width .25s ease;"></div>
        </div>
        <div id="loadText" style="margin-top:10px;font-size:14px;">Loading 0 / 0 files</div>
    </div>

</div>

<!-- SCREEN 2 -->
<div id="screenMode" class="screen">

<img src="media/flipbookbanner.jpg"
     class="flipbook-banner"
     onclick="toggleBanner(this)"
     alt="Flipbook Banner">

<div class="mode-title">Choose Flipbook Type</div>

<div class="mode-text">
Every memory deserves the right way to be remembered.  
Choose how you want to relive these moments.
</div>

<div class="mode-buttons">
    <button class="btn" onclick="openDouble()">üìò DOUBLE PAGE</button>
    <button class="btn" onclick="openSingle()">üìÑ SINGLE PAGE</button>
</div>

</div>

<!-- SCREEN 3 -->
<div id="screenStudents" class="screen">
    <div class="quote-layer"></div>
    <div class="rainbow students-title">Coming Soon‚Ä¶</div>
    <div class="rainbow-sub">STAY TUNED</div>

    <div class="students-text">
        Something special is coming... 
        A space full of memories, stories, smiles, and moments that truly define our journey together.
    </div>

    <button class="btn" onclick="goHome()">‚¨Ö Back</button>

</div>

<script>
const screenLoad     = document.getElementById("screenLoad");
const screenLoader   = document.getElementById("screenLoader");
const screenMode     = document.getElementById("screenMode");
const screenStudents = document.getElementById("screenStudents");
const loadBar        = document.getElementById("loadBar");
const loadText       = document.getElementById("loadText");
const circleProgress = document.getElementById("circleProgress");
const loaderEmoji    = document.getElementById("loaderEmoji");

const TOTAL_IMAGES = 101;
const IMAGE_PATH = "media/";
const MUSIC_PATH = "media/music.mp3";

function toggleBanner(el){ el.classList.toggle("lifted"); }
function showStudents(){ screenLoad.classList.remove("active"); screenStudents.classList.add("active"); }
function goHome(){ document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active")); screenLoad.classList.add("active"); }
function openDouble(){ window.location.href="double/flipbook.html"; }
function openSingle(){ window.location.href="single/flipbook.html"; }

function startLoading(){
    screenLoad.classList.remove("active");
    screenLoader.classList.add("active");

    const files=[];
    files.push("front.jpg");
    for(let i=1;i<=TOTAL_IMAGES;i++) files.push(`${i}.jpg`);
    files.push("last.jpg","music.mp3");

    let loaded=0,total=files.length;

    loadBar.style.width="0%";
    loadText.textContent=`Loading 0 / ${total} files`;

    function updateProgress(){
        loaded++;
        const percent=Math.round((loaded/total)*100);
        loadBar.style.width=percent+"%";
        loadText.textContent=`Loading ${loaded} / ${total} files`;
        const circumference=339.29;
        circleProgress.style.strokeDashoffset=circumference-(percent/100)*circumference;
loaderEmoji.animate(
  [
    { transform: "translateY(9px) scale(1)" },
    { transform: "translateY(9px) scale(1.15)" },
    { transform: "translateY(9px) scale(1)" }
  ],
  { duration: 300, easing: "ease-out" }
);

    }

    Promise.allSettled(
        files.map(file=>new Promise(resolve=>{
            if(file.endsWith(".mp3")){
                const audio=new Audio(MUSIC_PATH);
                audio.preload="auto";
                audio.addEventListener("canplaythrough",()=>{updateProgress();resolve();},{once:true});
                audio.addEventListener("error",()=>{updateProgress();resolve();},{once:true});
            } else {
                const img=new Image();
                img.src=IMAGE_PATH+file;
                img.decoding="async";
                img.onload=async()=>{try{await img.decode();}catch{} updateProgress();resolve();};
                img.onerror=()=>{updateProgress();resolve();};
            }
        }))
    ).then(()=>{
        screenLoader.classList.remove("active");
        screenMode.classList.add("active");
    });
}

/* ===== FLOWER FALL LOGIC (SCREEN 1 ONLY) ===== */
const flowerLayer = document.querySelector("#screenLoad .flower-layer");
let flowerTimer = null;

function startFlowers() {
    if (!flowerLayer) return;

    flowerTimer = setInterval(() => {
        const flower = document.createElement("div");
        flower.className = "flower";
        flower.textContent = "‚ùÑÔ∏è"; // ‚Üê change flower emoji here

        flower.style.left = Math.random() * 100 + "vw";
        flower.style.fontSize = (16 + Math.random() * 16) + "px";
        flower.style.animationDuration = (10 + Math.random() * 6) + "s";


        flowerLayer.appendChild(flower);

        setTimeout(() => flower.remove(), 18000);
    }, 1000); // frequency
}

function stopFlowers() {
    clearInterval(flowerTimer);
    flowerLayer.innerHTML = "";
}

/* start flowers on first screen load */
startFlowers();

/* stop flowers when loading flipbook */
const originalStartLoading = startLoading;
startLoading = function () {
    stopFlowers();
    originalStartLoading();
};

/* ===== TYPEWRITER EFFECT (STORY) ===== */
const storyEl = document.getElementById("storyText");
const storyHTML = storyEl.innerHTML;
storyEl.innerHTML = "";

let i = 0;
function typeStory() {
    if (i < storyHTML.length) {
        storyEl.innerHTML += storyHTML[i++];
        setTimeout(typeStory, 12); // typing speed
    }
}
typeStory();

/* ===== FLOATING QUOTES (SPECIAL SCREEN) ===== */
const quoteLayer = document.querySelector("#screenStudents .quote-layer");

const quotes = [
    "‚ÄúThis chapter ends here,but the memories don‚Äôt.‚Äù",
    "That‚Äôs why I made this ‚Äî to relive our memories again for a moment üòä"
];

let quoteIndex = 0;
let quoteTimer = null;

function startQuotes() {
    stopQuotes();
    quoteIndex = 0;

    quoteTimer = setInterval(() => {
        if (quoteIndex >= quotes.length) {
            clearInterval(quoteTimer);
            return;
        }

        const q = document.createElement("div");
        q.className = "floating-quote";
        q.textContent = quotes[quoteIndex++];

        const anchor = screenStudents.querySelector(".students-title");

if (anchor) {
    const anchorOffset = anchor.offsetTop;
    q.style.top = (anchorOffset - 90) + "px"; // üëà FLOATS ABOVE "Coming Soon"
} else {
    q.style.top = "40%";
}


        quoteLayer.appendChild(q);

        setTimeout(() => q.remove(), 6500);
    }, 2800);
}

function stopQuotes() {
    clearInterval(quoteTimer);
    quoteLayer.innerHTML = "";
}

/* hook into Special button flow */
const originalShowStudents = showStudents;
showStudents = function () {
    originalShowStudents();
    startQuotes();
};

/* stop quotes when leaving */
const originalGoHome = goHome;
goHome = function () {
    stopQuotes();
    originalGoHome();
};


const IS_TOUCH_DEVICE =
  "ontouchstart" in window ||
  navigator.maxTouchPoints > 0 ||
  navigator.msMaxTouchPoints > 0;



function spawnHeart(x, y) {
    const heart = document.createElement("div");
    heart.className = "like-heart";

    heart.textContent = HEARTS[Math.floor(Math.random() * HEARTS.length)];

    heart.style.left = x + "px";
    heart.style.top = y + "px";

    document.body.appendChild(heart);

    setTimeout(() => heart.remove(), 1000);
}


/* ===== HEART EMOJI POOL (EDIT FREELY) ===== */
/* ===== HEART EMOJI POOL ===== */
const HEARTS = ["‚ù§Ô∏è","üíñ","üíó","üíì","üíû","üß°","üíõ","üíö","üíô","üíú"];

/* ===== DESKTOP DOUBLE CLICK ===== */
/* ===== DESKTOP DOUBLE CLICK (NON-TOUCH ONLY) ===== */
if (!IS_TOUCH_DEVICE) {
  document.addEventListener("dblclick", (e) => {
    spawnHeart(e.clientX, e.clientY);
  });
}

/* ===== MOBILE DOUBLE TAP ===== */
/* ===== MOBILE DOUBLE TAP (TOUCH ONLY) ===== */
let lastTap = 0;

if (IS_TOUCH_DEVICE) {
  document.addEventListener(
    "touchend",
    (e) => {
      const now = Date.now();
      const touch = e.changedTouches[0];

      if (now - lastTap < 300) {
        spawnHeart(touch.clientX, touch.clientY);
      }

      lastTap = now;
    },
    { passive: true }
  );
}



</script>

</body>
</html>

